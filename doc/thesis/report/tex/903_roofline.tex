\appendix
\pdfbookmark{Theoretical Performance Models}{theoretical performance models}
\chapter{Theoretical Performance Models}

\section{Amdahl's Law}
\label{AmdahlsLaw}

The speedup that can be achieve by parallelizing an application is not only dependent on the number of parallel tasks but also on the percentage of the code that will run in parallel. This means that it is possible to have an extremely optimized implementation of the parallelization but if only a small part of the code is parallel the speedup will be small.

Amdahl's Law \ref{AMDAHL} defines the maximum attainable speedup of parallelizing an application, comparing a multithreaded application using $N$ processors with its serial counterpart. The law takes into account the portion of the code, $P$, that can be paralelized and defines the maximum speedup $S$ that can be obtained.

\begin{center}
	\begin{equation}
		S(N) = \frac{1}{(1 - P) + \frac{P}{N}}
		\label{eq:Amdahl}
	\end{equation}
\end{center}

Equation \ref{eq:Amdahl} defines the maximum attainable speedup resultant from the parallelization of an application according to the Amdahl's Law. The law is used in this work to prove that the small speedups for fewer number of variations per event are close to the theoretical maximum and are limited by the percentage of the code that can be made parallel.

\section{Roofline Model}
\label{App:Roofline}

The Roofline model \ref{Roofline} was used characterize the system in terms of attainable peak performance. This model uses two metrics for the performance calculation: the peak CPU performance and the memory bandwidth. With the peak values of these two metrics a roofline is drawn, being the theoretical limit for the performance on the system. Then, other ceilings can be added, which further limit the maximum attainable performance. The classic Roofline uses float point computation as the peak CPU performance metric. It may be a good metric for heavy computational algorithms, such as matrix multiplication, but the type operations on the critical region (\ttDilepKinFit function) are much more varied, as shown in the instruction mix presented in section \ref{Application:ttDilepKinFit:Analysis}. Instead, the computational intensity was used for measuring the CPU peak performance, as it considers all types of instructions.

Figure \ref{fig:Roofline} illustrates the Roofline model for the three systems.

\todo{Rooflines...}
